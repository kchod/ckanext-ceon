{% ckan_extends %}


{% block package_additional_info %}
  {% set authors = h.ckanext_ceon_get_authors(pkg.id) %}

  {# Add our custom author fields to the package description element. #}
  {% if authors %}
    <section id="dataset-authors" class="additional-info">
      <h3>Authors</h3>
      <table class="table table-striped table-bordered table-condensed">
        <thead>
          <tr>
            <th scope="col">{{ _('Author') }}</th>
            <th scope="col">{{ _('Affiliation') }}</th>
          </tr>
        </thead>
        <tbody>
        {% for a in authors %}
          {% set author_name = a.lastname|default('NN', true) %}
          {% if a.firstname %}
            {% set author_name = [author_name, a.firstname]|join(', ') %}
          {% endif %}
          <tr>
            <td>
              {% if a.email %}
                <a href="mailto:{{ a.email }}">{{ author_name }}</a>
              {% else %}
                {{ author_name }}
              {% endif %}
            </td>
            <td>{{ a.affiliation|default('', true) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  {% endif %}

  {{ super() }}

{% endblock %}

